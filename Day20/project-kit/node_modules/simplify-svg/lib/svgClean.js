'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _svgo = require('svgo');

var _svgo2 = _interopRequireDefault(_svgo);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var defaultIdPrefix = function defaultIdPrefix() {
  return _lodash2.default.uniqueId();
};

var svgClean = function svgClean(svgString) {
  var idPrefix = arguments.length <= 1 || arguments[1] === undefined ? defaultIdPrefix : arguments[1];

  var svgo = new _svgo2.default({
    plugins: [{ removeTitle: true }, { convertShapeToPath: true }, { removeDesc: { removeAny: true } }, { removeStyleElement: true }, { removeViewBox: true }, {
      cleanupIDs: {
        remove: true,
        minify: true,
        prefix: idPrefix()
      }
    }],
    js2svg: {
      pretty: true
    }
  });

  return new Promise(function (resolve) {
    svgo.optimize(svgString, function (result) {
      resolve(result.data);
    });
  });
};

exports.default = svgClean;